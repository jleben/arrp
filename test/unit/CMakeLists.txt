
add_custom_target(unit_tests)
 
function(add_unit_test name source)
  set(test_name "unit.${name}")
  add_output_test(${test_name} ${source} ${ARGN})
  add_dependencies(unit_tests test_${test_name})
endfunction()

add_unit_test(array1 array1.stream)
add_unit_test(array2 array2.stream)
add_unit_test(array3 array3.stream)
add_unit_test(array_nesting1 array_nesting1.stream)
add_unit_test(array_nesting2 array_nesting2.stream)
add_unit_test(array_nesting3 array_nesting3.stream)
add_unit_test(array_bound_inference1 array_bounding1.in)
add_unit_test(array_bound_inference2 array_bounding2.in)
add_unit_test(array_bound_inference3 array_bounding3.in)
add_unit_test(array_bound_inference4 array_bounding4.in)
add_unit_test(array_index_div array_index_div.in)
add_unit_test(array_index_mod array_index_mod.in)
add_unit_test(array_recursion1 array_recursion1.in)
add_unit_test(array_recursion2 array_recursion2.in)
add_unit_test(array_recursion3 array_recursion3.in)
add_unit_test(array_recursion4 array_recursion4.in)
add_unit_test(array_recursion5 array_recursion5.in)
add_unit_test(array_recursion6 array_recursion6.in)
add_unit_test(array_app_lambda_lift1 array_app_lambda_lift1.in)
add_unit_test(array_app_lambda_lift2 array_app_lambda_lift2.in)
add_unit_test(array_app_lambda_lift3 array_app_lambda_lift3.in)
add_unit_test(array_app_extra_dims array_app_extra_dims.in)
add_unit_test(primitive_w_array1 primitive_w_array1.in)
add_unit_test(primitive_w_array2 primitive_w_array2.in)
add_unit_test(primitive_w_array_and_scalar primitive_w_array_and_scalar.in)
add_unit_test(primitive_w_recursive_array1 primitive_w_recursive_array1.in)
add_unit_test(func_app func_app.in)
add_unit_test(func_app_multiple func_app_multiple.in)
add_unit_test(func_composition1 func_composition1.in)
add_unit_test(func_composition2 func_composition2.in)
add_unit_test(func_var_broadcast1 func_var_broadcast1.in)
add_unit_test(func_var_broadcast2 func_var_broadcast2.in)
add_unit_test(func_var_broadcast3 func_var_broadcast3.in)
add_unit_test(func_var_broadcast4 func_var_broadcast4.in)
add_unit_test(propagated_array_var1 propagated_array_var1.in)
add_unit_test(propagated_array_var2 propagated_array_var2.in)
add_unit_test(propagated_array_var3 propagated_array_var3.in)
add_unit_test(propagated_array propagated_array.in)
add_unit_test(external external.in external.hpp)
