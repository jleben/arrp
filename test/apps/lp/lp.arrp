import signal as sig;

lp(a,x) = y where {
  y = a*x + (1-a) * sig.delay(0,1,y);
};

... Test signal: 3 harmonics

signal = [t,i:3] -> signal.sine((2*i+1)*0.02, 0.0)[t];

output main = lp(0.4, signal);

...? [~,3]real64
...? (0.000,0.000,0.000)
...? (0.050,0.147,0.235)
...? (0.130,0.362,0.521)
...? (0.225,0.579,0.693)
...? (0.328,0.747,0.651)
...? (0.432,0.828,0.391)
...? (0.533,0.805,-0.001)
...? (0.628,0.676,-0.381)
...? (0.714,0.456,-0.609)
...? (0.791,0.174,-0.600)
...? (0.855,-0.131,-0.360)
...? (0.906,-0.416,0.019)
...? (0.943,-0.643,0.392)
...? (0.965,-0.778,0.615)
...? (0.972,-0.805,0.604)
...? (0.964,-0.718,0.363)
...? (0.940,-0.530,-0.018)
...? (0.902,-0.268,-0.391)
...? (0.849,0.032,-0.615)
...? (0.783,0.327,-0.604)
...? (0.705,0.577,-0.362)
...? (0.616,0.745,0.018)
...? (0.517,0.809,0.391)
...? (0.410,0.759,0.615)
...? (0.296,0.603,0.604)
...? (0.178,0.362,0.362)
...? (0.056,0.070,-0.018)
...? (-0.066,-0.232,-0.391)
...? (-0.187,-0.501,-0.615)
...? (-0.305,-0.700,-0.604)
...? (-0.418,-0.800,-0.362)
...? (-0.525,-0.788,0.018)
...? (-0.623,-0.666,0.391)
...? (-0.712,-0.450,0.615)
...? (-0.789,-0.170,0.604)
...? (-0.854,0.133,0.362)
...? (-0.905,0.418,-0.018)
...? (-0.942,0.643,-0.391)
...? (-0.965,0.779,-0.615)
...? (-0.972,0.805,-0.604)
...? (-0.963,0.718,-0.362)
...? (-0.940,0.530,0.018)
...? (-0.902,0.268,0.391)
...? (-0.849,-0.032,0.615)
...? (-0.783,-0.327,0.604)
...? (-0.705,-0.577,0.362)
...? (-0.616,-0.745,-0.018)
...? (-0.517,-0.809,-0.391)
...? (-0.410,-0.759,-0.615)
...? (-0.296,-0.603,-0.604)
...? (-0.178,-0.362,-0.362)
...? (-0.056,-0.070,0.018)
...? (0.066,0.232,0.391)
...? (0.187,0.501,0.615)
...? (0.305,0.700,0.604)
...? (0.418,0.800,0.362)
...? (0.525,0.788,-0.018)
...? (0.623,0.666,-0.391)
...? (0.712,0.450,-0.615)
...? (0.789,0.170,-0.604)
...? (0.854,-0.133,-0.362)
...? (0.905,-0.418,0.018)
...? (0.942,-0.643,0.391)
...? (0.965,-0.779,0.615)
...? (0.972,-0.805,0.604)
