module array;

slice(pos,len,a) = [len:i -> a[pos + i]];

## FIXME: Array bounding required to get rid of #a
scan(f,a) = [#a:
    0 -> a[0];
    i -> f(this[i-1], a[i]);
];

fold(f,a) =
    let s = scan(f,a) in
        s[#a-1];

iterate(f,init) = [
    0 -> init;
    i -> f(this[i-1]);
];

map(f,a) = [#a: i -> f(a[i])];

reverse(x) = [#x: i -> x[#x-1-i]];
